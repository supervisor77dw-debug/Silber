# Database (PostgreSQL - Supabase/Vercel Postgres)
# Runtime queries (Pooler for Supabase)
DATABASE_URL="postgresql://postgres.[project-ref]:[password]@aws-0-eu-central-1.pooler.supabase.com:6543/postgres?pgbouncer=true"

# Direct connection for migrations (Non-pooled for Supabase)
DIRECT_URL="postgresql://postgres.[project-ref]:[password]@aws-0-eu-central-1.pooler.supabase.com:5432/postgres"

# For Vercel Postgres (no separate directUrl needed):
# DATABASE_URL="postgres://default:xxx@xxx.us-east-1.postgres.vercel-storage.com:5432/verceldb?sslmode=require"

# Data Sources
COMEX_XLS_URL="https://www.cmegroup.com/delivery_reports/Silver_stocks.xls"
SGE_API_URL="https://www.sge.com.cn/sge/en/benchmark/silver"
FX_API_URL="https://api.exchangerate.host/latest"

# Optional: Alternative FX source (European Central Bank)
ECB_FX_URL="https://www.ecb.europa.eu/stats/eurofxref/eurofxref-daily.xml"

# SGE Price Providers (Multi-provider system with automatic fallback)
# Provider A (Preferred): Metals-API - https://metals-api.com (50 req/month free)
METALS_API_KEY=""                # e.g., "abc123xyz..."

# Provider B (Fallback): TwelveData - https://twelvedata.com (800 req/day free)
TWELVE_DATA_API_KEY=""           # e.g., "def456uvw..."

# Provider C (Manual Override): Set SGE price directly in CNY per gram
SGE_MANUAL_PRICE_CNY_G=""        # e.g., "5.8" (5.8 CNY per gram)

# Provider D (Estimation): Shanghai premium over COMEX spot price
SGE_PREMIUM_PERCENT="3"          # Default: 3% (typical range: 2-5%)

# Price Validation (Plausibility range for silver in USD/oz)
SILVER_MIN_PRICE="10"            # Minimum reasonable price
SILVER_MAX_PRICE="200"           # Maximum reasonable price

# Debug Mode
DEBUG_PRICES="0"                 # Set to "1" to enable /api/debug/prices endpoint

# Manual Price Overrides (for testing or when APIs fail)
COMEX_MANUAL_SPOT_USD_OZ=""      # e.g., "31.25"

# COMEX Stocks Fallback (when XLS unavailable - e.g., weekends/holidays)
COMEX_FALLBACK_REGISTERED=""     # e.g., "50000000" (50M oz)
COMEX_FALLBACK_ELIGIBLE=""       # e.g., "250000000" (250M oz)
SGE_MANUAL_PRICE_CNY_G=""        # e.g., "7.45" (CNY per gram)

# API Keys (Optional - for premium data sources)
METALS_API_KEY=""                 # metals-api.com (free tier: 50 req/month)
ALPHA_VANTAGE_API_KEY=""          # Alternative for COMEX price

# Alert Thresholds
ALERT_SPREAD_THRESHOLD="2.0"
ALERT_REGISTERED_THRESHOLD="50000000"
ALERT_WITHDRAWAL_THRESHOLD="5000000"

# Notification (optional)
TELEGRAM_BOT_TOKEN=""
TELEGRAM_CHAT_ID=""
SMTP_HOST=""
SMTP_PORT=""
SMTP_USER=""
SMTP_PASSWORD=""
ALERT_EMAIL=""

# Timezone
TZ="Europe/Berlin"

# Cron Secret (for Vercel Cron protection - SERVER ONLY)
CRON_SECRET=""

# Client Refresh Token (for browser UI refresh button - PUBLIC)
NEXT_PUBLIC_REFRESH_TOKEN=""

# Backfill Configuration
CRON_ENDPOINT="http://localhost:3000/api/cron/fetch-data"  # For local backfill

